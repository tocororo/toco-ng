<mat-card *ngIf="currentJournal.data">
  <mat-card-header>
    <!-- <img mat-card-avatar *ngIf="currentJournal.data.logo; else logotemplate" [style.background-size]="'cover'" src="currentJournal.data.logo">
            <ng-template #logotemplate>
                <img mat-card-avatar [src]="defaultLogo" alt="">
            </ng-template> -->

    <mat-card-title>
      <div fxLAyout="row" fxLayoutAlign="space-between start">
        <mat-icon
          class="mat-18 notification-position"
          color="accent"
          *ngIf="currentJournal.is_current"
          matTooltip="Revisión Actual"
          >star</mat-icon
        >
        <mat-icon
          class="mat-18 notification-position"
          color="accent"
          *ngIf="!currentJournal.reviewed"
          matTooltip="Posee Cambios no Vistos"
          >adjust</mat-icon
        >
      </div>
    </mat-card-title>

    <mat-card-subtitle>
      <mat-label> {{ currentJournal.created_at | date }}. </mat-label>
      <mat-label>
        {{ currentJournal.comment }}
      </mat-label>
    </mat-card-subtitle>
  </mat-card-header>

  <mat-divider [inset]="true" style="margin-bottom: 1em"></mat-divider>

  <mat-card-content>
    <toco-journal-view-version-field
      (editingJournalChange)="fieldEditingJournalChange()"
      [editingJournal]="editingJournal"
      [currentJournal]="currentJournal"
      [type]="journalDataType.title"
    ></toco-journal-view-version-field>

    <!-- subtitle -->
    <toco-journal-view-version-field
      (editingJournalChange)="fieldEditingJournalChange()"
      [editingJournal]="editingJournal"
      [currentJournal]="currentJournal"
      [type]="journalDataType.subtitle"
    ></toco-journal-view-version-field>

    <toco-journal-view-version-field
    (editingJournalChange)="fieldEditingJournalChange()"
      [editingJournal]="editingJournal"
      [currentJournal]="currentJournal"
      [type]="journalDataType.shortname"
    ></toco-journal-view-version-field>

    <mat-label style="font-weight: bold">ISSN: </mat-label>
    <div style="margin-left: 0.8em">
      <toco-journal-view-version-field
      (editingJournalChange)="fieldEditingJournalChange()"
        [editingJournal]="editingJournal"
        [currentJournal]="currentJournal"
        [type]="journalDataType.issnP"
      ></toco-journal-view-version-field>

      <toco-journal-view-version-field
      (editingJournalChange)="fieldEditingJournalChange()"
        [editingJournal]="editingJournal"
        [currentJournal]="currentJournal"
        [type]="journalDataType.issnE"
      ></toco-journal-view-version-field>

      <toco-journal-view-version-field
      (editingJournalChange)="fieldEditingJournalChange()"
        [editingJournal]="editingJournal"
        [currentJournal]="currentJournal"
        [type]="journalDataType.issnL"
      ></toco-journal-view-version-field>
    </div>
    <mat-label style="font-weight: bold">RNPS: </mat-label>
    <div style="margin-left: 0.8em">
      <toco-journal-view-version-field
      (editingJournalChange)="fieldEditingJournalChange()"
        [editingJournal]="editingJournal"
        [currentJournal]="currentJournal"
        [type]="journalDataType.rnpsP"
      ></toco-journal-view-version-field>
      <toco-journal-view-version-field
      (editingJournalChange)="fieldEditingJournalChange()"
        [editingJournal]="editingJournal"
        [currentJournal]="currentJournal"
        [type]="journalDataType.rnpsE"
      ></toco-journal-view-version-field>
    </div>
    <toco-journal-view-version-field
    (editingJournalChange)="fieldEditingJournalChange()"
      [editingJournal]="editingJournal"
      [currentJournal]="currentJournal"
      [type]="journalDataType.url"
    ></toco-journal-view-version-field>

    <toco-journal-view-version-field
    (editingJournalChange)="fieldEditingJournalChange()"
      [editingJournal]="editingJournal"
      [currentJournal]="currentJournal"
      [type]="journalDataType.email"
    ></toco-journal-view-version-field>

    <toco-journal-view-version-field
    (editingJournalChange)="fieldEditingJournalChange()"
      [editingJournal]="editingJournal"
      [currentJournal]="currentJournal"
      [type]="journalDataType.seriadas_cubanas"
    ></toco-journal-view-version-field>

    <toco-journal-view-version-field
    (editingJournalChange)="fieldEditingJournalChange()"
      [editingJournal]="editingJournal"
      [currentJournal]="currentJournal"
      [type]="journalDataType.purpose"
    ></toco-journal-view-version-field>

    <toco-journal-view-version-field
    (editingJournalChange)="fieldEditingJournalChange()"
      [editingJournal]="editingJournal"
      [currentJournal]="currentJournal"
      [type]="journalDataType.start_year"
    ></toco-journal-view-version-field>

    <toco-journal-view-version-field
    (editingJournalChange)="fieldEditingJournalChange()"
      [editingJournal]="editingJournal"
      [currentJournal]="currentJournal"
      [type]="journalDataType.end_year"
    ></toco-journal-view-version-field>

    <toco-journal-view-version-field
    (editingJournalChange)="fieldEditingJournalChange()"
      [editingJournal]="editingJournal"
      [currentJournal]="currentJournal"
      [type]="journalDataType.frequency"
    ></toco-journal-view-version-field>

    <toco-journal-view-version-field
    (editingJournalChange)="fieldEditingJournalChange()"
      [editingJournal]="editingJournal"
      [currentJournal]="currentJournal"
      [type]="journalDataType.description"
    ></toco-journal-view-version-field>

    <div
      *ngIf="currentJournal.data.description"
      class="e2e-inner-html-bound text-align-justify"
      [innerHTML]="currentJournal.data.description"
    ></div>

    <mat-label style="font-weight: bold">Redes Sociales:</mat-label>
    <div style="margin-left: 0.8em">
      <toco-journal-view-version-field
      (editingJournalChange)="fieldEditingJournalChange()"
        [editingJournal]="editingJournal"
        [currentJournal]="currentJournal"
        [type]="journalDataType.facebook"
      ></toco-journal-view-version-field>

      <toco-journal-view-version-field
      (editingJournalChange)="fieldEditingJournalChange()"
        [editingJournal]="editingJournal"
        [currentJournal]="currentJournal"
        [type]="journalDataType.twitter"
      ></toco-journal-view-version-field>

      <toco-journal-view-version-field
      (editingJournalChange)="fieldEditingJournalChange()"
        [editingJournal]="editingJournal"
        [currentJournal]="currentJournal"
        [type]="journalDataType.linkedin"
      ></toco-journal-view-version-field>
    </div>

    <!-- show terms -->
    <mat-divider
      [inset]="true"
      style="margin-bottom: 1em; margin-top: 1em"
    ></mat-divider>

    <!-- <p>
      <mat-label style="font-weight: bold;"> Institución: </mat-label>
      <mat-label
        *ngIf="currentInstitutionTerms.length == 0"
        class="text-muted text-through"
        >Vacío</mat-label
      >
      <ng-container *ngFor="let termSource of currentInstitutionTerms">
        <mat-label style="padding-left: 1em;">
          {{ termSource.description }}
        </mat-label>
      </ng-container>
    </p> -->
    <!-- <mat-card style="margin: 1em; background-color: whitesmoke;">
      <mat-card-header>
        <mat-card-title> Grupo: </mat-card-title>
        <mat-label
          *ngIf="currentGroupTerms.length == 0"
          class="text-muted text-through"
          >Vacío</mat-label
        >
      </mat-card-header>
      <mat-card-content>
        <mat-chip-list>
          <ng-container *ngFor="let termSource of currentGroupTerms">
            <mat-chip>
              <button
                mat-icon-button
                color="accent"
                matTooltip="Agregar"
                (click)="concat(journalDataType.term, termSource)"
              >
                <mat-icon class="mat-18">merge_type</mat-icon>
              </button>
              {{ termSource.description }}
            </mat-chip>
          </ng-container>
        </mat-chip-list>
      </mat-card-content>
    </mat-card>

    <mat-card style="margin: 1em; background-color: whitesmoke;">
      <mat-card-header>
        <mat-card-title> Provincia: </mat-card-title>
        <mat-label
          *ngIf="currentProvinceTerms.length == 0"
          class="text-muted text-through"
          >Vacío</mat-label
        >
      </mat-card-header>
      <mat-card-content>
        <mat-chip-list>
          <ng-container *ngFor="let termSource of currentProvinceTerms">
            <mat-chip>
              <button
                mat-icon-button
                color="accent"
                matTooltip="Agregar"
                (click)="concat(journalDataType.term, termSource)"
              >
                <mat-icon class="mat-18">merge_type</mat-icon>
              </button>
              {{ termSource.description }}
            </mat-chip>
          </ng-container>
        </mat-chip-list>
      </mat-card-content>
    </mat-card> -->

    <mat-card style="margin: 1em; background-color: whitesmoke">
      <mat-card-header>
        <mat-card-title> Licencia: </mat-card-title>
        <mat-label
          *ngIf="currentLicenceTerms.length == 0"
          class="text-muted text-through"
          >Vacío</mat-label
        >
      </mat-card-header>
      <mat-card-content>
        <mat-chip-list>
          <ng-container *ngFor="let termSource of currentLicenceTerms">
            <mat-chip>
              <button
                mat-icon-button
                color="accent"
                matTooltip="Agregar"
                (click)="concat(journalDataType.term, termSource)"
              >
                <mat-icon class="mat-18">merge_type</mat-icon>
              </button>
              {{ termSource.description }}
            </mat-chip>
          </ng-container>
        </mat-chip-list>
      </mat-card-content>
    </mat-card>

    <mat-card style="margin: 1em; background-color: whitesmoke">
      <mat-card-header>
        <mat-card-title>
          <button
            mat-icon-button
            color="accent"
            matTooltip="Reemplazar"
            (click)="replaceSubjects()"
          >
            <mat-icon class="mat-18">merge_type</mat-icon>
          </button>

          Materias:
        </mat-card-title>
        <mat-label
          *ngIf="currentSubjectTerms.length == 0"
          class="text-muted text-through"
          >Vacío</mat-label
        >
      </mat-card-header>
      <mat-card-content>
        <mat-chip-list>
          <ng-container *ngFor="let termSource of currentSubjectTerms">
            <mat-chip>
              <!-- <button
                mat-icon-button
                color="accent"
                matTooltip="Agregar"
                (click)="concat(journalDataType.term, termSource)"
              >
                <mat-icon class="mat-18">merge_type</mat-icon>
              </button> -->
              {{ termSource.description }}
            </mat-chip>
          </ng-container>
        </mat-chip-list>
      </mat-card-content>
    </mat-card>

    <mat-card style="margin: 1em; background-color: whitesmoke">
      <mat-card-header>
        <mat-card-title>
          <button
            mat-icon-button
            color="accent"
            matTooltip="Reemplazar"
            (click)="replaceOrganizations()"
          >
            <mat-icon class="mat-18">merge_type</mat-icon>
          </button>
          Organizaciones:
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <toco-source-organizations
          [sourceData]="currentJournal.data"
          [editable]="false"
          [ngStyle]="{ margin: '1em' }"
        >
        </toco-source-organizations>
      </mat-card-content>
    </mat-card>

    <mat-card style="margin: 1em; background-color: whitesmoke">
      <mat-card-header>
        <mat-card-title>
          <button
            mat-icon-button
            color="accent"
            matTooltip="Reemplazar"
            (click)="replaceIndexes()"
          >
            <mat-icon class="mat-18">merge_type</mat-icon>
          </button>

          Indizaciones:
        </mat-card-title>
        <!-- <mat-label
          *ngIf="currentDataBaseTerms.length == 0"
          class="text-muted text-through"
          >Vacío</mat-label
        > -->
      </mat-card-header>
      <mat-card-content>
        <toco-source-indexes
          [sourceData]="currentJournal.data"
          [editable]="false"
          [ngStyle]="{ margin: '1em' }"
        >
        </toco-source-indexes>
        <!-- <mat-accordion>
          <ng-container *ngFor="let termSource of currentDataBaseTerms">
            <mat-expansion-panel
              (opened)="panelOpenState = true"
              (closed)="panelOpenState = false"
            >
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <button
                    mat-icon-button
                    color="accent"
                    matTooltip="Agregar"
                    (click)="concat(journalDataType.term, termSource)"
                  >
                    <mat-icon class="mat-18">merge_type</mat-icon>
                  </button>
                  {{ termSource.description }}
                </mat-panel-title>
                <mat-panel-description> </mat-panel-description>
              </mat-expansion-panel-header>
              <p *ngIf="termSource.data">
                <strong>URL: </strong> {{ termSource.data.url }}
              </p>
              <p *ngIf="termSource.data && termSource.data['initial_cover']">
                <strong>Cobertura inicio: </strong>
                {{ termSource.data["initial_cover"] }}
              </p>
              <p *ngIf="termSource.data && termSource.data['end_cover']">
                <strong>Cobertura hasta: </strong>
                {{ termSource.data["end_cover"] }}
              </p>
            </mat-expansion-panel>
          </ng-container>
        </mat-accordion> -->
      </mat-card-content>
    </mat-card>
  </mat-card-content>

  <mat-divider [inset]="true"></mat-divider>

  <!-- <mat-card-actions
    fxLayout="row wrap"
    fxLayoutAlign="space-between center"
    fxLayoutGap="10px"
    style="padding: 1em"
  >
    <mat-checkbox
                [(ngModel)]="currentJournalChecked"
                (change)="markAsViewed()"
            >
                Marcar como Visto
            </mat-checkbox>

    <div fxLayoutGap="10px">
      <button mat-stroked-button color="primary" (click)="replace()">
        Sustituir todos los campos
      </button>
      <!-- <button mat-raised-button color="accent">Descartar</button>
    </div>
  </mat-card-actions> -->
</mat-card>
