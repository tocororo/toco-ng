
<mat-vertical-stepper [linear]=true #stepper>

    <mat-step *ngIf="informationPanel" [stepControl]="informationFormGroup">
        <ng-template matStepLabel>Información</ng-template>
        <h3>Información de la revista</h3>
        <form
            [formGroup]="informationFormGroup"
        >
            <toco-form-container
                #informationPanelContainer
                [panels]="informationPanel"
                [useAccordion]="false"
                fxLayout="row"
                [formGroup]="informationFormGroup"
                [deleteValuesAfterAction]="false"
            ></toco-form-container>

            <div>
                <button mat-raised-button color="primary" matStepperNext (click)="step1Action()">Siguiente</button>
            </div>
        </form>
    </mat-step>

    <mat-step *ngIf="organizationPanel" [stepControl]="organizationFormGroup">
        <ng-template matStepLabel>Institución</ng-template>
        <h3>Entidad que gestiona la revista</h3>
        <form
            [formGroup]="organizationFormGroup"
        >
            <toco-form-container
                *ngIf="organizationPanel"
                #organizationPanelContainer
                [panels]="organizationPanel"
                [useAccordion]="false"
                fxLayout="row"
                [deleteValuesAfterAction]="false"
            ></toco-form-container>

            <toco-form-container
                *ngIf="institutionPanel"
                #institutionPanelContainer
                [panels]="institutionPanel"
                [useAccordion]="false"
                fxLayout="row"
                [deleteValuesAfterAction]="false"
            ></toco-form-container>
            <mat-checkbox
              #isManagedBy
              [checked]="true"
              (click)="manageByEntityClick()"
            >
                <p>La revista es gestionada por una unidad perteneciente a: "{{institution.name}}"</p>
            </mat-checkbox>

            <toco-form-container
                *ngIf="isManagedBy.checked && entityPanel"
                #entityPanelContainer
                [panels]="entityPanel"
                [useAccordion]="false"
                fxLayout="row"
                [deleteValuesAfterAction]="false"
            ></toco-form-container>


            <div>
                <button mat-raised-button color="accent" matStepperPrevious>Atrás</button>
                <button mat-raised-button color="primary" matStepperNext (click)="step2Action()">Siguiente</button>
            </div>
        </form>
    </mat-step>

    <mat-step *ngIf="indexesPanel" [stepControl]="indexesFormGroup">
        <ng-template matStepLabel>Indizaciones</ng-template>
        <h3>Bases de Datos, Catálogos o Índices en que está incluida la revista</h3>
        <form
            [formGroup]="indexesFormGroup"
        >
            <toco-form-container
                #indexPanelContainer
                [panels]="indexesPanel"
                [useAccordion]="true"
                fxLayout="row"
                [formGroup]="indexesFormGroup"
                [action]="indexAction"
                [actionLabel]="'Adicionar Indizacion'"
                [deleteValuesAfterAction]="false"
            ></toco-form-container>

            <div>
                <button mat-raised-button color="accent" matStepperPrevious>Atrás</button>
                <button mat-raised-button color="primary" matStepperNext (click)="step3Action()">Siguiente</button>
            </div>
        </form>
    </mat-step>

    <mat-step>
        <ng-template matStepLabel>Fin</ng-template>
        <h3>Ha completado el formulario</h3>
        <h4>Antes de aceptar puede revisar nuevamente los valores que ha introducido.</h4>
        <!-- <toco-journal-view-info [journal]="journal"></toco-journal-view-info> -->
        <div>
        <button mat-raised-button color="accent" matStepperPrevious>Atrás</button>
        <button mat-raised-button color="primary" (click)="finishStepper()">Aceptar</button>
        </div>
    </mat-step>
</mat-vertical-stepper>

