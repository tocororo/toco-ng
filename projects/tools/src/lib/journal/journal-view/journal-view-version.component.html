

    <mat-card *ngIf="currentJournal" fxFlex="1 2 calc(15em + 20px)" style="margin: .5em;">

        <mat-icon class="mat-18 notification-position" color="accent" *ngIf="currentJournal.is_current" matTooltip="Versión Actual">star</mat-icon>
        <mat-icon class="mat-18 notification-position" color="accent" *ngIf="!currentJournal.reviewed" matTooltip="Posee Cambios no Vistos">adjust</mat-icon>
        <mat-card-header>

            <!-- <img mat-card-avatar *ngIf="currentJournal.data.logo; else logotemplate" [style.background-size]="'cover'" src="currentJournal.data.logo">
            <ng-template #logotemplate>
                <img mat-card-avatar [src]="defaultLogo" alt="">
            </ng-template> -->

            <mat-card-title>

                <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.title"></toco-journal-view-field>

            </mat-card-title>

            <mat-card-subtitle>
                <mat-label>
                    {{currentJournal.created_at | date }}.
                </mat-label>
                <mat-label>
                    {{currentJournal.comment}}
                </mat-label>
            </mat-card-subtitle>
            
        </mat-card-header>

        <mat-divider [inset]="true" style="margin-bottom: 1em;"></mat-divider>

        <mat-card-content>
            <!-- subtitle -->
            <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.subtitle"></toco-journal-view-field>

            <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.shortname"></toco-journal-view-field>

            <mat-label style="font-weight: bold;">ISSN: </mat-label>
            <div style="margin-left: .8em;">

                <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.issnP"></toco-journal-view-field>

                <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.issnE"></toco-journal-view-field>

                <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.issnE"></toco-journal-view-field>

            </div>

            <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.rnps"></toco-journal-view-field>

            <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.url"></toco-journal-view-field>

            <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.email"></toco-journal-view-field>

            <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.seriadas_cubanas"></toco-journal-view-field>

            <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.purpose"></toco-journal-view-field>

            <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.start_year"></toco-journal-view-field>

            <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.end_year"></toco-journal-view-field>

            <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.frequency"></toco-journal-view-field>

            <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.description"></toco-journal-view-field>

            <div *ngIf="currentJournal.data.description" class="e2e-inner-html-bound  text-align-justify"
                [innerHTML]="currentJournal.data.description"></div>

            <mat-label style="font-weight: bold;">Redes Sociales:</mat-label>
            <div style="margin-left: .8em;">
                <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.facebook"></toco-journal-view-field>

                <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.twitter"></toco-journal-view-field>
    
                <toco-journal-view-field [journal]="journal" [currentJournal]="currentJournal" [type]="journalDataType.linkedin"></toco-journal-view-field>
            </div>


            <!-- show terms -->
            <mat-divider [inset]="true" style="margin-bottom: 1em; margin-top: 1em;"></mat-divider>
            <p>
                <mat-label style="font-weight: bold;"> Institución: </mat-label>
                <mat-label *ngIf="currentInstitutionTerms.length == 0" class="text-muted text-through">Vacío</mat-label>
                <ng-container *ngFor="let termSource of currentInstitutionTerms">
                    <mat-label style="padding-left: 1em;">
                        {{ termSource.term.name }}
                    </mat-label>
                </ng-container>
            </p>
            <mat-card style="margin: 1em; background-color: whitesmoke;">
                <mat-card-header>
                    <mat-card-title> Grupo: </mat-card-title>
                    <mat-label *ngIf="currentGroupTerms.length == 0" class="text-muted text-through">Vacío</mat-label>
                </mat-card-header>
                <mat-card-content>
                    <mat-chip-list>
                        <ng-container *ngFor="let termSource of currentGroupTerms">
                            <mat-chip>
                                <button mat-icon-button color="accent" matTooltip="Agregar">
                                    <mat-icon class="mat-18">merge_type</mat-icon>
                                </button>
                                {{ termSource.term.name }}
                            </mat-chip>
                        </ng-container>
                    </mat-chip-list>
                </mat-card-content>
            </mat-card>

            <mat-card style="margin: 1em; background-color: whitesmoke;">
                <mat-card-header>
                    <mat-card-title> Provincia: </mat-card-title>
                    <mat-label *ngIf="currentProvinceTerms.length == 0" class="text-muted text-through">Vacío</mat-label>
                </mat-card-header>
                <mat-card-content>
                    <mat-chip-list>
                        <ng-container *ngFor="let termSource of currentProvinceTerms">
                            <mat-chip>
                                {{ termSource.term.name }}
                            </mat-chip>
                        </ng-container>
                    </mat-chip-list>
                </mat-card-content>
            </mat-card>

            <mat-card style="margin: 1em; background-color: whitesmoke;">
                <mat-card-header>
                    <mat-card-title> Licencia: </mat-card-title>
                    <mat-label *ngIf="currentLicenceTerms.length == 0" class="text-muted text-through">Vacío</mat-label>
                </mat-card-header>
                <mat-card-content>
                    <mat-chip-list>
                        <ng-container *ngFor="let termSource of currentLicenceTerms">
                            <mat-chip>
                                {{ termSource.term.name }}
                            </mat-chip>
                        </ng-container>
                    </mat-chip-list>
                </mat-card-content>
            </mat-card>

            <mat-card style="margin: 1em; background-color: whitesmoke;">
                <mat-card-header>
                    <mat-card-title> Materias: </mat-card-title>
                    <mat-label *ngIf="currentSubjectTerms.length == 0" class="text-muted text-through">Vacío</mat-label>
                </mat-card-header>
                <mat-card-content>
                    <mat-chip-list>
                        <ng-container *ngFor="let termSource of currentSubjectTerms">
                            <mat-chip>
                                {{ termSource.term.name }}
                            </mat-chip>
                        </ng-container>
                    </mat-chip-list>
                </mat-card-content>
            </mat-card>

            <mat-card style="margin: 1em; background-color: whitesmoke;">
                <mat-card-header>
                    <mat-card-title> Bases de Datos:</mat-card-title>
                    <mat-label *ngIf="currentDataBaseTerms.length == 0" class="text-muted text-through">Vacío</mat-label>
                </mat-card-header>
                <mat-card-content>
                    <mat-accordion>
                        <ng-container *ngFor="let termSource of currentDataBaseTerms">
                            <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        {{ termSource.term.name }}
                                    </mat-panel-title>
                                    <mat-panel-description>
    
                                    </mat-panel-description>
                                </mat-expansion-panel-header>
                                <p *ngIf="termSource.data && termSource.data['url']">{{ termSource.data['url'] }}</p>
                            </mat-expansion-panel>
                        </ng-container>
                    </mat-accordion>
                </mat-card-content>
            </mat-card>

        </mat-card-content>
        
        <mat-divider [inset]="true"></mat-divider>
        
        <mat-card-actions fxLayout="row wrap" fxLayoutAlign="space-between center" fxLayoutGap="10px" style="padding: 1em;">

            <mat-checkbox
                [(ngModel)]="currentJournalChecked"
                (change)="markAsViewed()"
            >
                Marcar como Visto
            </mat-checkbox>

            <div fxLayoutGap="10px">
                <button mat-raised-button color="primary" (click)="replace()">Sustituir</button>
                <button mat-raised-button color="accent">Descartar</button>
            </div>
        </mat-card-actions>
    </mat-card>
