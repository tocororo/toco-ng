<mat-progress-bar mode="indeterminate" color="accent" *ngIf="loading" style="margin-bottom: 1em;"></mat-progress-bar>

<div *ngIf="journal != undefined" fxLayout="row wrap" style="margin: 1em;">

    <div fxLAyout="row" fxLayoutAlign="end center" fxFlexFill style="background-color: whitesmoke;">

        <button mat-icon-button aria-label="Before version" [disabled]="isDisabledNavigateBefore" matTooltip="Versión Anterior" (click)="beforeVersion()">
            <mat-icon>navigate_before</mat-icon>
        </button>
        <button mat-icon-button aria-label="Next version" [disabled]="isDisabledNavigateNext" matTooltip="Versión Siguiente" (click)="nextVersion()">
            <mat-icon>navigate_next</mat-icon>
        </button>

    </div>

    <!-- Show journal information -->
    <toco-journal-view-info [journal]="journal" fxFlex="1 2 calc(15em + 20px)" style="margin: .5em;"></toco-journal-view-info>


    <mat-card *ngIf="currentJournal" fxFlex="1 2 calc(15em + 20px)" style="margin: .5em;">

        <mat-icon class="mat-18 notification-position" color="accent" *ngIf="currentJournal.is_current" matTooltip="Versión Actual">star</mat-icon>

        <mat-card-header>

            <!-- <img mat-card-avatar *ngIf="currentJournal.data.logo; else logotemplate" [style.background-size]="'cover'" src="currentJournal.data.logo">
            <ng-template #logotemplate>
                <img mat-card-avatar [src]="defaultLogo" alt="">
            </ng-template> -->

            <mat-card-title>

                <button mat-icon-button aria-label="Next version" matTooltip="Remplazar" (click)="nextVersion()">
                    <mat-icon color="warn">layers</mat-icon>
                </button>

                <button mat-icon-button aria-label="Next version" matTooltip="Mezclar" (click)="nextVersion()">
                    <mat-icon color="warn">merge_type</mat-icon>
                </button>

                <ng-container *ngIf="journal.source_type == 'JOURNAL'">
                    Revista:
                </ng-container>
                <ng-container *ngIf="currentJournal.data.title">
                    {{currentJournal.data.title}}
                </ng-container>
                <mat-label *ngIf="!currentJournal.data.title" class="text-muted text-through">Vacío</mat-label>

            </mat-card-title>

            <mat-card-subtitle>
                <mat-label>
                    {{currentJournal.created_at | date }}.
                </mat-label>
                <mat-label>
                    {{currentJournal.comment}}
                </mat-label>
            </mat-card-subtitle>
            
        </mat-card-header>

        <mat-divider [inset]="true" style="margin-bottom: 1em;"></mat-divider>

        <mat-card-content>
            <!-- subtitle -->
            <p>
                <mat-label style="font-weight: bold;">Subtítulo:</mat-label>
                <mat-label *ngIf="currentJournal.data.subtitle"> {{currentJournal.data.subtitle}} </mat-label>
                <mat-label *ngIf="!currentJournal.data.subtitle" class="text-muted text-through">Vacío</mat-label>
                <!-- <mat-icon class="mat-18" color="accent" *ngIf="currentJournal.data && currentJournal.data.subtitle !== '' && currentJournal.data.subtitle !== currentcurrentJournal.data.subtitle" matTooltip="Tiene cambios">notifications</mat-icon> -->
            </p>
    
            <p>
                <mat-label style="font-weight: bold;">Nombre Abreviado:</mat-label>
                <mat-label *ngIf="currentJournal.data.shortname"> {{currentJournal.data.shortname}} </mat-label>
                <mat-label *ngIf="!currentJournal.data.shortname" class="text-muted text-through">Vacío</mat-label>
            </p>
    
            <mat-label style="font-weight: bold;">ISSN: </mat-label>
            <div style="margin-left: .8em;">
                <p >
                    <mat-label style="font-weight: bold;">Impreso: </mat-label>
                    <mat-label *ngIf="currentJournal.data.issn.p"> {{currentJournal.data.issn.p}} </mat-label>
                    <mat-label *ngIf="!currentJournal.data.issn.p" class="text-muted text-through">Vacío</mat-label>
                </p>
                <p>
                    <mat-label style="font-weight: bold;">Electrónico:</mat-label>
                    <mat-label *ngIf="currentJournal.data.issn.e"> {{currentJournal.data.issn.e}} </mat-label>
                    <mat-label *ngIf="!currentJournal.data.issn.e" class="text-muted text-through">Vacío</mat-label>
                </p>
                <p>
                    <mat-label style="font-weight: bold;">De enlace:</mat-label>
                    <mat-label *ngIf="currentJournal.data.issn.l"> {{currentJournal.data.issn.l}} </mat-label>
                    <mat-label *ngIf="!currentJournal.data.issn.l" class="text-muted text-through">Vacío</mat-label>
                </p>
            </div>
    
            <p>
                <mat-label style="font-weight: bold;"> RNPS: </mat-label>
                <mat-label *ngIf="currentJournal.data.rnps"> {{currentJournal.data.rnps}} </mat-label>
                <mat-label *ngIf="!currentJournal.data.rnps" class="text-muted text-through">Vacío</mat-label>
            </p>
    
            <p>
                <mat-label style="font-weight: bold;"> URL: </mat-label>
                <mat-label *ngIf="currentJournal.data.url"> {{currentJournal.data.url}}</mat-label>
                <mat-label *ngIf="!currentJournal.data.url" class="text-muted text-through">Vacío</mat-label>
            </p>
    
            <p>
                <mat-label style="font-weight: bold;"> Email: </mat-label>
                <mat-label *ngIf="currentJournal.data.email"> {{currentJournal.data.email}} </mat-label>
                <mat-label *ngIf="!currentJournal.data.email" class="text-muted text-through">Vacío</mat-label>
            </p>
    
            <p>
                <mat-label style="font-weight: bold;"> Seriadas Cubanas: </mat-label>
                <a *ngIf="currentJournal.data.seriadas_cubanas" href="currentJournal.data.seriadas_cubanas">{{currentJournal.data.seriadas_cubanas}}</a>
                <mat-label *ngIf="!currentJournal.data.seriadas_cubanas" class="text-muted text-through">Vacío</mat-label>
            </p>
    
            <p>
                <mat-label style="font-weight: bold;"> Propósito: </mat-label>
                <mat-label *ngIf="currentJournal.data.purpose"> {{currentJournal.data.purpose}} </mat-label>
                <mat-label *ngIf="!currentJournal.data.purpose" class="text-muted text-through">Vacío</mat-label>
            </p>
    
            <p>
                <mat-label style="font-weight: bold;"> Año de Inicio: </mat-label>
                <mat-label *ngIf="currentJournal.data.start_year"> {{currentJournal.data.start_year}} </mat-label>
                <mat-label *ngIf="!currentJournal.data.start_year" class="text-muted text-through">Vacío</mat-label>
            </p>
    
            <p>
                <mat-label style="font-weight: bold;"> Año de Fin: </mat-label>
                <mat-label *ngIf="currentJournal.data.end_year"> {{currentJournal.data.end_year}} </mat-label>
                <mat-label *ngIf="!currentJournal.data.end_year" class="text-muted text-through">Vacío</mat-label>
            </p>
    
            <p>
                <mat-label style="font-weight: bold;"> Frecuencia de Publicación: </mat-label>
                <mat-label *ngIf="currentJournal.data.frequency"> {{currentJournal.data.frequency}} </mat-label>
                <mat-label *ngIf="!currentJournal.data.frequency" class="text-muted text-through">Vacío</mat-label>
            </p>
            <mat-label style="font-weight: bold;"> Descripción:</mat-label>
            <mat-label *ngIf="!currentJournal.data.description" class="text-muted text-through">Vacío</mat-label>
            <div *ngIf="currentJournal.data.description" class="e2e-inner-html-bound  text-align-justify"
                [innerHTML]="currentJournal.data.description"></div>
    
            <!-- show terms -->
            <mat-divider [inset]="true" style="margin-bottom: 1em; margin-top: 1em;"></mat-divider>
            <p>
                <mat-label style="font-weight: bold;"> Institución: </mat-label>
                <mat-label *ngIf="currentInstitutionTerms.length == 0" class="text-muted text-through">Vacío</mat-label>
                <ng-container *ngFor="let term of currentInstitutionTerms">
                    <mat-label *ngIf="term.vocabulary_id == vocabularies.INTITUTION" style="padding-left: 1em;">
                        {{ term.name }}
                    </mat-label>
                </ng-container>
            </p>
            <mat-card style="margin: 1em; background-color: whitesmoke;">
                <mat-card-header>
                    <mat-card-title> Grupo: </mat-card-title>
                    <mat-label *ngIf="currentGroupTerms.length == 0" class="text-muted text-through">Vacío</mat-label>
                </mat-card-header>
                <mat-card-content>
                    <mat-chip-list>
                        <ng-container *ngFor="let termof currentGroupTerms">
                            <mat-chip *ngIf="term.vocabulary_id == vocab_id">
                                {{ term.name }}
                            </mat-chip>
                        </ng-container>
                    </mat-chip-list>
                </mat-card-content>
            </mat-card>

        </mat-card-content>
        
        <mat-divider [inset]="true"></mat-divider>
        
        <mat-card-actions fxLayout="row wrap" fxLayoutAlign="space-between center" fxLayoutGap="10px" style="padding: 1em;">

            <mat-checkbox
                [(ngModel)]="checked"
                [disabled]="disabled">
                Marcar como Visto
            </mat-checkbox>

            <div fxLayoutGap="10px">
                <button mat-raised-button color="primary">Sustituir</button>
                <button mat-raised-button color="accent">Descartar</button>
            </div>
        </mat-card-actions>
    </mat-card>
    <!-- </div> -->


</div>

<mat-card *ngIf="journal == undefined" style="margin: 1em;">

    <mat-card-content>
        <h1>No se encontró la información solicitada</h1>
    </mat-card-content>

    <mat-card-actions>
        <a mat-stroked-button color="primary" [routerLink]="['/journal']">Volver a la lista</a>

    </mat-card-actions>

</mat-card>