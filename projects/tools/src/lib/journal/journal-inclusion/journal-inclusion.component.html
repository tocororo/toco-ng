<mat-progress-bar mode="indeterminate" *ngIf="loading" color="accent">
</mat-progress-bar>

<h1>Inclusión de Revista</h1>

<button
  mat-raised-button
  color="accent"
  *ngIf="!isStartProcess"
  (click)="resetEdit()"
>
  Comenzar de nuevo
</button>

<toco-form-container
  *ngIf="isStartProcess"
  [panels]="findPanel"
  [useAccordion]="false"
  [formGroup]="findFormGroup"
  [action]="searchJournalAction"
  [actionLabel]="'Buscar'"
  [deleteValuesAfterAction]="true"
></toco-form-container>

<div *ngIf="isEditig">
  <h2>
    Complete y compruebe todos los datos solicitados para incluir la revista.
  </h2>
  <toco-journal-edit
    [journal]="journal"
    (journalEditDone)="journalEditDone()"
  ></toco-journal-edit>
</div>

<div *ngIf="!isEditig && !isStartProcess">
  <h2>Para finalizar el proceso de Inclusión.</h2>
  <h3>Debe completar su información personal y aceptar el acuerdo legal.</h3>

  <mat-horizontal-stepper [linear]="true" #stepper>
    <mat-step>
      <ng-template matStepLabel>Revista</ng-template>

      <mat-action-row>
        <button mat-raised-button color="accent" (click)="editAgain()">
          Editar denuevo
        </button>
      </mat-action-row>

      <toco-journal-view-info
        *ngIf="isViewing"
        [journal]="journal"
      ></toco-journal-view-info>

      <div>
        <button mat-button matStepperPrevious>Atrás</button>
        <button mat-button matStepperNext>Siguiente</button>
      </div>
    </mat-step>
    <mat-step [stepControl]="personFormGroup">
      <ng-template matStepLabel>Persona</ng-template>
      <h2>
        aqui se solicita información sobre la relacion que tiene la persona con
        la revista
      </h2>
      <p>
        para acceder a este formulario se necesita autenticarse con sceiba, por
        tanto, los datos sobre la persona ya los tenemos capturados y se deben
        mostrar aqui,
      </p>

      <h3>Si la revista ya ha sido incluida por otra persona</h3>
      <p>se muestra aqui la información sobre esa persona</p>
      <form [formGroup]="personFormGroup">
        <toco-form-container
          [panels]="personPanel"
          [useAccordion]="false"
          [formGroup]="personFormGroup"
        ></toco-form-container>

        <div>
          <button mat-button matStepperPrevious>Atrás</button>
          <button mat-button matStepperNext>Siguiente</button>
        </div>
      </form>
    </mat-step>

    <mat-step>
      <ng-template matStepLabel>Finalizar</ng-template>
      <h2>
        Acuerdo legal
      </h2>
      <p>
        texto del acuerdo legal
      </p>

      <h3>Subtitulo</h3>
      <p>algo mas...</p>
      <form [formGroup]="personFormGroup">
        <toco-form-container
          [panels]="agreementPanel"
          [useAccordion]="false"
          [formGroup]="agreementFormGroup"
        ></toco-form-container>

        <div>
          <button mat-raised-button color="primary" (click)="finishInclusion()">
            FINALIZAR Inclusión y ENVIAR Información
          </button>
        </div>
      </form>
    </mat-step>
  </mat-horizontal-stepper>
</div>
