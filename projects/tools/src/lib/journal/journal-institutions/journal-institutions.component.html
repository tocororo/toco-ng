<ng-container *ngIf="organizationFormGroup && initOrganizationPanel">
  <mat-toolbar
    *ngIf="enableEdit"
    fxLayout="row wrap"
    fxLayoutAlign="space-between center"
    fxLayoutGap="20px"
  >
    <span>Adicionar</span>
    <div
      fxLayout="row wrap"
      fxLayoutAlign="space-between center"
      fxLayoutGap="20px"
    >
      <button mat-raised-button (click)="addInst(false)">
        Institucion Cubana Oficial
      </button>
      <button mat-raised-button (click)="addInst(true)">
        Otra Institucion
      </button>
    </div>
  </mat-toolbar>

  <mat-accordion>
    <mat-expansion-panel
      *ngFor="let panel of panels; let index = index"
      expanded="panel.open"
    >
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{ roles[panel.inst.data["role"]].label }}
        </mat-panel-title>
        <mat-panel-description>
          {{ panel.inst.term.name }}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <ng-container *ngIf="panel.inst.term.vocabulary_id == vocab.INTITUTION">
        <toco-institution-hierarchy-viewer
          [term]="panel.inst.term"
          [node]="panel.inst['h']"
        ></toco-institution-hierarchy-viewer>
      </ng-container>
      <ng-container
        *ngIf="panel.inst.term.vocabulary_id == vocab.EXTRA_INSTITUTIONS"
      >
        <toco-extra-institution-viewer [term]="panel.inst.term">
        </toco-extra-institution-viewer>
      </ng-container>
      <mat-action-row *ngIf="enableEdit">
        <button
          mat-stroked-button
          [disabled]="panels.length === 1"
          (click)="setAsMain(index)"
        >
          Establecer como Principal
        </button>
        <button mat-stroked-button (click)="editInst(index)">
          Editar
        </button>
        <button
          mat-stroked-button
          [disabled]="panels.length === 1"
          (click)="removeInst(index)"
        >
          Eliminar
        </button>
      </mat-action-row>
    </mat-expansion-panel>
  </mat-accordion>
</ng-container>
